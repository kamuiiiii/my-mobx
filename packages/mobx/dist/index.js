(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.r(t),e.d(t,{action:()=>v,autorun:()=>l,observable:()=>f,reaction:()=>s});var r=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="proxies",r=new WeakMap,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,r;return t=e,(r=[{key:"on",value:function(e,t,n){this.proxies.has(e)||this.proxies.set(e,{});var r=this.proxies.get(e);r[t]=r[t]||new Set,r[t].add(n)}},{key:"trigger",value:function(e,t){var n=this.proxies.get(e);if(n){var r=n[t];r&&r.size&&r.forEach((function(t){0!==u.batchDeep?u.saveBatchEvent(e,t):t()}))}}},{key:"off",value:function(e,t,n){this.proxies.get(e)[t].delete(n)}},{key:"clear",value:function(e,t){this.proxies.get(e)[t].clear()}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"currentFn",null),i(this,"disposes",[]),i(this,"event",new r),i(this,"batchDeep",0),i(this,"batchEventQueue",new Map)}var t,n;return t=e,(n=[{key:"saveBatchEvent",value:function(e,t){this.batchEventQueue.has(e)||this.batchEventQueue.set(e,new Set),this.batchEventQueue.get(e).add(t)}},{key:"triggerBatchEvent",value:function(){this.batchEventQueue.forEach((function(e,t,n){e.size&&e.forEach((function(e){return e()})),n.delete(t)}))}}])&&o(t.prototype,n),e}());function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var c=function(e){return null!==e&&"object"===a(e)},f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Proxy(t,{get:function(t,n,r){var o=u.currentFn;return o&&(u.event.on(t,n,o),u.disposes.push((function(){u.event.off(t,n,o)}))),c(t[n])?e(t[n]):Reflect.get(t,n,r)},set:function(e,t,n,r){if(e[t]===n)return!0;var o=Reflect.set(e,t,n,r);return u.event.trigger(e,t),o},deleteProperty:function(e,t){return u.event.clear(e,t),Reflect.deleteProperty(e,t)}})},l=function(e){!function t(){u.currentFn=t,e(),u.currentFn=null}()},s=function(e,t){u.currentFn=t,e(),u.currentFn=null;var n=u.disposes;return u.disposes=[],function(){n.forEach((function(e){return e()}))}},v=function(e){return function(){u.batchDeep++,e(),u.batchDeep--,0===u.batchDeep&&u.triggerBatchEvent()}},b=exports;for(var p in t)b[p]=t[p];t.__esModule&&Object.defineProperty(b,"__esModule",{value:!0})})();